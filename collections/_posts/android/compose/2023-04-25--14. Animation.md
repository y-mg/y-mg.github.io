---
layout: post
title: "Animation"
date: 2023-04-25T00:00:01Z
authors: ["y-mg"]
categories: [Android, Jetpack]
description: "Use Compose - Animation"
thumbnail: "/assets/images/android/android-compose.png"
image: "/assets/images/android/android-compose.png"
comments: false
---

## Animation
***
애니메이션은 UI 요소들의 움직임과 시각적인 변화를 의미하는데, 컴포즈를 사용하게 되면 기존 안드로이드에서는 구현하기 어려웠던 애니메이션 구현을 쉽게 할 수 있다는 장점이 있다.
<br/>

```kotlin
@Composable
fun AnimationEx() {
    var helloWorldVisible by remember { mutableStateOf(true) }
    var isRed by remember { mutableStateOf(false) }

    val backgroundColor by animateColorAsState(
        targetValue = if (isRed) {
            Color.Red
        } else {
            Color.White
        }
    )

    val alpha by animateFloatAsState(
        targetValue = if (isRed) {
            1.0f
        } else {
            0.5f
        }
    )

    Column(
        modifier = Modifier
            .padding(16.dp)
            .background(backgroundColor)
            .alpha(alpha)
    ) {
        AnimatedVisibility(
            visible = helloWorldVisible,
            enter = fadeIn() + expandVertically(),
            exit = fadeOut() + shrinkVertically()
        ) {
            Text(text = "Hello World!")
        }

        Row(
            Modifier.selectable(
                selected = helloWorldVisible,
                onClick = {
                    helloWorldVisible = true
                }
            ),
            verticalAlignment = Alignment.CenterVertically
        ) {
            RadioButton(
                selected = helloWorldVisible,
                onClick = { helloWorldVisible = true }
            )
            Text(
                text = "Hello World 보이기"
            )
        }

        Row(
            Modifier.selectable(
                selected = !helloWorldVisible,
                onClick = {
                    helloWorldVisible = false
                }
            ),
            verticalAlignment = Alignment.CenterVertically
        ) {
            RadioButton(
                selected = !helloWorldVisible,
                onClick = { helloWorldVisible = false }
            )
            Text(
                text = "Hello World 감추기"
            )
        }

        Text(text = "배경 색을 바꾸어봅시다.")

        Row(
            Modifier.selectable(
                selected = !isRed,
                onClick = {
                    isRed = false
                }
            ),
            verticalAlignment = Alignment.CenterVertically
        ) {
            RadioButton(
                selected = !isRed,
                onClick = { isRed = false }
            )
            Text(
                text = "흰색"
            )
        }

        Row(
            Modifier.selectable(
                selected = isRed,
                onClick = {
                    isRed = true
                }
            ),
            verticalAlignment = Alignment.CenterVertically
        ) {
            RadioButton(
                selected = isRed,
                onClick = { isRed = true }
            )
            Text(
                text = "빨간색"
            )
        }
    }
}
```
- <span onClick="window.open('https://github.com/y-mg/compose-study/blob/main/Part%2002/12.%20Animation01/app/src/main/java/com/ymg/compose/animation01/MainActivity.kt');" style="cursor:pointer; color: #5495ff;">원본 코드</span>
<br/>
<br/>
<br/>

```kotlin
@Composable
fun Animation2Ex() {
    var isDarkMode by remember { mutableStateOf(false) }

    val transition = updateTransition(
        targetState = isDarkMode,
        label = "다크 모드 트랜지션"
    )

    val backgroundColor by transition.animateColor(label = "다크 모드 배경색상 애니메이션") { state ->
        when (state) {
            true -> {
                Color.Black
            }

            false -> {
                Color.White
            }
        }
    }

    val color by transition.animateColor(label = "다크 모드 글자 색상 애니메이션") { state ->
        when (state) {
            true -> {
                Color.White
            }

            false -> {
                Color.Black
            }
        }
    }

    val alpha by transition.animateFloat(label = "다크 모드 알파 애니메이션") { state ->
        when (state) {
            true -> {
                1f
            }

            false -> {
                0.7f
            }
        }
    }

    Column(
        modifier = Modifier
            .background(backgroundColor)
            .alpha(alpha)
    ) {
        RadioButtonWithText(text = "일반 모드", selected = !isDarkMode, color = color) {
            isDarkMode = false
        }
        RadioButtonWithText(text = "다크 모드", selected = isDarkMode, color = color) {
            isDarkMode = true
        }

        Crossfade(targetState = isDarkMode) {state ->
            when (state) {
                true -> {
                    Row {
                        Box(modifier = Modifier
                            .background(Color.Red)
                            .size(20.dp)) {
                            Text("1")
                        }
                        Box(modifier = Modifier
                            .background(Color.Magenta)
                            .size(20.dp)) {
                            Text("2")
                        }
                        Box(modifier = Modifier
                            .background(Color.Blue)
                            .size(20.dp)) {
                            Text("3")
                        }
                    }
                }

                false -> {
                    Column {
                        Box(modifier = Modifier
                            .background(Color.Red)
                            .size(20.dp)) {
                            Text("A")
                        }
                        Box(modifier = Modifier
                            .background(Color.Magenta)
                            .size(20.dp)) {
                            Text("B")
                        }
                        Box(modifier = Modifier
                            .background(Color.Blue)
                            .size(20.dp)) {
                            Text("C")
                        }
                    }
                }
            }
        }
    }
}
```
- <span onClick="window.open('https://github.com/y-mg/compose-study/blob/main/Part%2002/13.%20Animation02/app/src/main/java/com/ymg/compose/animation02/MainActivity.kt');" style="cursor:pointer; color: #5495ff;">원본 코드</span>