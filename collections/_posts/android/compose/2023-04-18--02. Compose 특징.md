---
layout: post
title: "Compose 특징"
date: 2023-04-18T00:00:00Z
authors: ["y-mg"]
categories: [Android, Jetpack]
description: "컴포즈의 특징"
thumbnail: "/assets/images/android/android-compose.png"
image: "/assets/images/android/android-compose.png"
comments: false
---

## Composable Function
***
컴포저블 함수는 데이터를 받아서 `UI` 요소로 방출(`emit`) 하는 함수로, <code style="color: #eb5657;">@Composable</code> 어노테이션을 함수 상단에 추가하여 컴파일러에게 `UI` 로 변환하기 위한 함수임을 알려줘야 한다.
<br/>

```kotlin
@Composable
fun Greeting(name: String) {
    Text("Hello World")
}
```
- 컴포저블 함수는 파라미터로 데이터를 받아 사용할 수 있다.
- 컴포저블 함수는 아무것도 반환하지 않는다.
<br/>
<br/>
<br/>



## Compose 흐름
***
앱 로직은 최상위의 컴포저블 함수에 데이터를 제공하고, 다른 컴포저블 함수를 호출해서 `UI` 를 만들고 적절한 데이터를 해당 컴포저블 및 계층 구조로 아래로 전달한다.
<br/>

<div style="
background-color: #ffffff;
background-image: url(/assets/images/android/compose/compose-flow-data.png);
background-size: contain;
background-repeat: no-repeat;
background-position: center center;
">
<img src="/assets/images/android/compose/compose-flow-data.png" style="visibility: hidden;" />
</div>
<br/>

사용자가 `UI` 와 상호작용할 때 이벤트를 발생시키는데 이 이벤트를 앱 로직에 전달해서 앱의 상태를 변경해야 하며, 상태가 변경되면 컴포저블 함수는 새 데이터와 함께 다시 호출되고 `UI` 의 요소가 다시 그려지게 된다.
<br/>

<div style="
background-color: #ffffff;
background-image: url(/assets/images/android/compose/compose-flow-event.png);
background-size: contain;
background-repeat: no-repeat;
background-position: center center;
">
<img src="/assets/images/android/compose/compose-flow-event.png" style="visibility: hidden;" />
</div>
<br/>
<br/>
<br/>



## 재구성
***
기존 안드로이드 레거시(`XML`)에서 `UI` 를 변경하기 위해서는 `setter` 를 호출하여 내부의 상태를 변경하는 방식이었다면, 컴포즈에서는 새 데이터를 사용해서 컴포저블 함수를 다시 호출하는 방식으로 동작한다.
<br/>

```kotlin
@Composable
fun ClickButton(
    count: Int,
    onClick: () -> Unit
) {
    Button(onClick = onClick) {
        Text("Button Clicked Count $count")
    }
}
```
- 버튼이 클릭되면 `count` 값을 업데이트 하는 함수인데, 컴포즈는 <code style="color: #eb5657;">Text</code> 함수를 사용해서 람다를 다시 호출해서 새로운 `count` 값을 표시하게 되는데 이러한 프로세스를 재구성(`Recomposition`) 이라고 하며, 값에 종속되지 않은 다름 함수는 호출되지 않는다.
- `UI` 전체를 재구성하는 작업은 리소스 낭비가 심하기 때문에 컴포즈는 이러한 재구성을 통해 리소스 문제를 해결한다.
<br/>
<br/>
<br/>



## Side Effect
***
함수가 결과값을 반환하는 것 외에 다른 동작을 할 때 그 함수는 `Side` `Effect` 를 가진다고 하는데 컴포저블 함수는 기본적으로 `Side` `Effect` 가 없어야하며, 만약 필요한 경우에는 컴포저블의 생명주기를 인식하는 환경 내에서 `Side` `Effect` 를 호출해야한다.
<br/>

예를 들어, I/O 작업 같이 리소스가 많이 드는 작업을 하는 경우에는 백그라운드 코루틴에서 작업을 실행하고 값의 결과를 컴포저블 함수로 넘기는 형태로 사용해야한다.