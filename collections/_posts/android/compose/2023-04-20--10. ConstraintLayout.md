---
layout: post
title: "ConstraintLayout"
date: 2023-04-20T00:00:01Z
authors: ["y-mg"]
categories: [Android, Jetpack]
description: "Use Compose - ConstraintLayout"
thumbnail: "/assets/images/android/android-compose.png"
image: "/assets/images/android/android-compose.png"
comments: false
---

## ConstraintLayout
***
안드로이드 레거시 뷰(`XML`) 에서 <code style="color: #eb5657;">ConstraintLayout</code> 에 해당하는 컴포넌트이다.
<br/>

```gradle
// https://github.com/androidx/constraintlayout
implementation "androidx.constraintlayout:constraintlayout-compose:1.0.1"
```

```kotlin
@Composable
fun ConstraintLayoutEx() {
    ConstraintLayout(modifier = Modifier.fillMaxSize()) {
        val (redBox, magentaBox, greenBox, yelloBox) = createRefs()

        Box(
            modifier = Modifier
                .size(40.dp)
                .background(Color.Red)
                .constrainAs(redBox) {
                    // 우하단
                    bottom.linkTo(anchor = parent.bottom, margin = 8.dp)
                    end.linkTo(anchor = parent.end, margin = 4.dp)
                }
        )
        Box(
            modifier = Modifier
                .size(40.dp)
                .background(Color.Magenta)
                .constrainAs(magentaBox) {
                    // 상단 중앙
                    start.linkTo(anchor = parent.start)
                    end.linkTo(anchor = parent.end)
                }
        )
        Box(
            modifier = Modifier
                .size(40.dp)
                .background(Color.Green)
                .constrainAs(greenBox) {
                    // 정중앙
                    /*
                    start.linkTo(anchor = parent.start)
                    end.linkTo(anchor = parent.end)
                    top.linkTo(anchor = parent.top)
                    bottom.linkTo(anchor = parent.bottom)
                    */
                    /*
                    centerVerticallyTo(parent)
                    centerHorizontallyTo(parent)
                    */
                    centerTo(parent)
                }
        )

        Box(
            modifier = Modifier
                .size(40.dp)
                .background(Color.Yellow)
                .constrainAs(yelloBox) {
                    // magentaBox 의 우하단
                    start.linkTo(anchor = magentaBox.end)
                    top.linkTo(anchor = magentaBox.bottom)
                }
        )
    }


    /**
     * constrainAs() 는 뷰의 위치를 렌더링 해주는 Modifier
     */
}
```
- <span onClick="window.open('https://github.com/y-mg/compose-study/blob/main/Part%2002/01.%20ConstraintLayout/app/src/main/java/com/ymg/compose/constraintlayout/MainActivity.kt');" style="cursor:pointer; color: #5495ff;">원본 코드</span>
<br/>
<br/>
<br/>



## ConstraintSet
***
<code style="color: #eb5657;">ConstraintLayout</code> 안에서 뷰들의 위치 및 크기를 결정하기 위한 도구이다.

```gradle
// https://github.com/androidx/constraintlayout
implementation "androidx.constraintlayout:constraintlayout-compose:1.0.1"
```

```kotlin
@Composable
fun ConstraintSetEx() {
    val constraintSet = ConstraintSet {
        val redBox = createRefFor("redBox")
        val magentaBox = createRefFor("magentaBox")
        val greenBox = createRefFor("greenBox")
        val yellowBox = createRefFor("yellowBox")

        constrain(redBox) {
            bottom.linkTo(parent.bottom, 10.dp)
            end.linkTo(parent.end, 30.dp)
        }

        constrain(magentaBox) {
            start.linkTo(parent.start, 10.dp)
            end.linkTo(parent.end, 30.dp)
        }

        constrain(greenBox) {
            centerTo(parent)
        }

        constrain(yellowBox) {
            start.linkTo(greenBox.end)
            top.linkTo(greenBox.bottom)
        }
    }

    ConstraintLayout(
        modifier = Modifier.fillMaxSize(),
        constraintSet = constraintSet
    ) {
        // val (redBox, magentaBox, greenBox, yellowBox) = createRefs()

        Box(
            modifier = Modifier
                .size(40.dp)
                .background(Color.Red)
                .layoutId("redBox")
                /*
                .constrainAs(redBox) {
                    bottom.linkTo(parent.bottom, 10.dp)
                    end.linkTo(parent.end, 30.dp)
                }
                */
        )
        Box(
            modifier = Modifier
                .size(40.dp)
                .background(Color.Magenta)
                .layoutId("magentaBox")
                /*
                .constrainAs(magentaBox) {
                    start.linkTo(parent.start, 10.dp)
                    end.linkTo(parent.end, 30.dp)
                }
                */
        )
        Box(
            modifier = Modifier
                .size(40.dp)
                .background(Color.Green)
                .layoutId("greenBox")
                /*
                .constrainAs(greenBox) {
                    centerTo(parent)
                }
                */
        )

        Box(
            modifier = Modifier
                .size(40.dp)
                .background(Color.Yellow)
                .layoutId("yellowBox")
                /*
                .constrainAs(yellowBox) {
                    start.linkTo(greenBox.end)
                    top.linkTo(greenBox.bottom)
                }
                */
        )
    }


    /**
     * createRefFor() 로 레퍼런스를 만들고 constrain() 로 제약을 만들 수 있음
     */
}
```
- <span onClick="window.open('https://github.com/y-mg/compose-study/blob/main/Part%2002/02.%20ConstraintSet/app/src/main/java/com/ymg/compose/constraintset/MainActivity.kt');" style="cursor:pointer; color: #5495ff;">원본 코드</span>
<br/>
<br/>
<br/>



## Chain / Barrier
***
<code style="color: #eb5657;">Chain</code> 은 여러 개의 뷰를 연결하여 배치할 때 사용하며, 각 뷰의 크기와 간격을 지정할 수 있다.
<br/>

<code style="color: #eb5657;">Barrier</code> 는 여러 뷰를 포함하는 그룹에 <code style="color: #eb5657;">Barrier</code> 를 적용하여 해당 그룹의 위치에 따라 다른 뷰의 위치를 설정할 수 있다.
<br/>

```gradle
// https://github.com/androidx/constraintlayout
implementation "androidx.constraintlayout:constraintlayout-compose:1.0.1"
```

```kotlin
@Composable
fun ConstraintLayoutEx() {
    ConstraintLayout(Modifier.fillMaxSize()) {
        val (redBox, yellowBox, magentaBox, text) = createRefs()

        Box(
            modifier = Modifier
                .size(40.dp)
                .background(Color.Red)
                .constrainAs(redBox) {
                    top.linkTo(anchor = parent.top, margin = 18.dp)
                }
        )

        Box(
            modifier = Modifier
                .size(40.dp)
                .background(Color.Yellow)
                .constrainAs(yellowBox) {
                    top.linkTo(anchor = parent.top, margin = 30.dp)
                }
        )

        Box(
            modifier = Modifier
                .size(40.dp)
                .background(Color.Magenta)
                .constrainAs(magentaBox) {
                    top.linkTo(anchor = parent.top, margin = 50.dp)
                }
        )

        // createVerticalChain(redBox, yellowBox, magentaBox, chainStyle = ChainStyle.SpreadInside)
        createHorizontalChain(redBox, yellowBox, magentaBox, chainStyle = ChainStyle.SpreadInside)

        val barrier = createBottomBarrier(redBox, yellowBox, magentaBox)

        Text(
            text = "나랏말싸미 듕귁에 달아 문자와로 서르 사맛디 아니할쎄 이런 전차로 어린 백셩이 니르고져 홀베이셔도 " +
                   "마참네 제 뜨들 시러펴디 몯할 노미하니아 내 이랄 윙하야 어엿비너겨 새로 스믈 여들 짜랄 맹가노니 " +
                   "사람마다 해여 수비니겨 날로 쑤메 뻔한킈 하고져 할따라미니라",
            modifier = Modifier.constrainAs(text) {
                top.linkTo(barrier)
            }
        )
    }
}
```
- <span onClick="window.open('https://github.com/y-mg/compose-study/blob/main/Part%2002/03.%20AdvancedConstraintLayout/app/src/main/java/com/ymg/compose/advancedconstraintlayout/MainActivity.kt');" style="cursor:pointer; color: #5495ff;">원본 코드</span>