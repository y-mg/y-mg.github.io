---
layout: post
title: "MVVM Architecture"
date: 2019-10-05T00:00:01Z
authors: ["y-mg"]
categories: [Android, Architecture, Design Pattern]
description: "구글에서 공식적으로 가이드를 제공해주는 디자인 패턴"
thumbnail: "/assets/images/android/android-architecture.png"
image: "/assets/images/android/android-architecture.png"
comments: false
---

## MVVM Architecture
***
구글에서 공식적으로 가이드를 제공해주는 디자인 패턴으로 `MVVM` 은 `Model`, `View`, `ViewModel` 의 줄임말이다.
- `MVP` 디자인 패턴의 `Presenter` 는 뷰를 참조할 수 있지만, `MVVM` 디자인 패턴의 `ViewModel` 은 참조가 불가능하다.
<br>

<div style="
background-color: #ffffff;
background-image: url(/assets/images/android/architecture/mvvm.png);
background-size: contain;
background-repeat: no-repeat;
background-position: center center;
">
<img src="/assets/images/android/architecture/mvvm.png" style="visibility: hidden;" />
</div>
<br>

### View
액티비티 혹은 프래그먼트에 해당하는 `UI` 를 말한다.
<br>
<br>

### ViewModel
뷰가 필요로 하는 데이터를 저장하고 관리하는 역할을 한다.
<br>
<br>

### Model
네트워크, DB 등의 데이터를 말한다.
<br>
<br>

### Repository
`DataSource` 로부터 `Model` 을 가져오는 것을 추상화하여 각 레이어끼리 의존성을 낮추고 수정에 유연하도록 해준다.
<br/>

예를 들어, 로컬 `DB` 의 데이터를 가져오는 `DataSource` 와 서버와의 통신으로 데이터를 가져오는 `DataSource` 의 구분을 없애, 해당 데이터를 사용하는 레이어가 `DataSource` 를 알 필요가 없게 해줌으로서 결합도를 낮춰준다.
<br/>
<br/>

### DataSource
`Model` 부터 데이터를 가져오는 역할이다. (데이터의 출저 의미)
<br/>

`Repository` 가 `DataSource` 에 의존하지 않기 위해 인터페이스와 구현체로 구성되어서 `DataSource` 수정 시 `Repository` 에 대한 영향을 줄일 수 있다.
<br>
<br>
<br>



## ViewModel 의 특징
***
화면 회전과 같이 액티비티가 재성생이 되는 경우, 액티비티는 종료되고 다시 생성하는 과정을 거치면서 데이터가 유지되지 않게 된다.
<br/>

액티비티 재성성시 데이터를 유지하기 위해서는 <code style="color: #eb5657;">onSaveInstanceState()</code> 에서 번들에 데이터를 저장하고, <code style="color: #eb5657;">onCreate()</code> 또는 <code style="color: #eb5657;">onRestoreInstanceState()</code> 에서 저장한 데이터를 전달 받을 수 있으나, 번들은 저장하는 데이터의 자료형과 크기에 제한이 있다는 단점이 있다.
<br/>

`ViewModel` 을 사용하면 액티비티가 재성성이 되는 경우에 소멸되지 않고, 액티비티 내에서 <code style="color: #eb5657;">finish()</code> 가 호출되는 경우에 <code style="color: #eb5657;">onCleared()</code> 가 호출되며 소멸된다.




