---
layout: post
title: "launch"
date: 2020-11-06T00:00:00Z
authors: ["y-mg"]
categories: [Kotlin, Coroutine]
description: "코루틴을 만드는 코루틴 빌더 (CoroutineBuilder)"
thumbnail: "/assets/images/study/kotlin/kotlin.png"
image: "/assets/images/study/kotlin/kotlin.png"
comments: false
---


## launch
***
코루틴을 만드는 코루틴 빌더이고, <code style="color: #eb5657;">Job</code> 객체를 반환하고 <code style="color: #eb5657;">join()</code>, <code style="color: #eb5657;">cancel()</code> 로 제어할 수 있다.
- <code style="color: #eb5657;">join()</code> 은 대기, <code style="color: #eb5657;">cancel()</code> 은 중단하는 함수이다.
- <code style="color: #eb5657;">Job</code> 객체는 완료를 명시적으로 대기하는 데 사용할 수 있으며, 생성과 동시에 실행된다.
- 비동기 작업을 수행에 대한 결과값을 반환하지 않지 않는다.
<br/>

```kotlin
import kotlinx.coroutines.*

fun main() = runBlocking {
    println("Start")
    
    job1.join()
    job2.join()
    // or joinAll(job1, job2)

    println("End")
}

val job1: Job = GlobalScope.launch {
    var i = 0
    while (i < 3) {
        delay(1000)
        println("Running1 $i")
        i++
    }
}

val job2: Job = GlobalScope.launch {
    var i = 0
    while (i < 3) {
        delay(1000)
        println("Running2 $i")
        i++
    }
}


// 결과는 실행 시 마다 다름
// Start
// Running2 0
// Running1 0
// Running2 1
// Running1 1
// Running1 2
// Running2 2
// End
```

```kotlin
import kotlinx.coroutines.*

fun main() = runBlocking {
    println("Start")
    jop.cancel()
    println("End")
}

val job: Job = GlobalScope.launch {
    var i = 0
    while (i < 3) {
        delay(1000)
        println("Running $i")
        i++
    }
}


// Start
// End
```
<br/>



## launch 의 지연 및 즉시 실행
***
코루틴 빌더 <code style="color: #eb5657;">launch</code>, <code style="color: #eb5657;">async</code> 의 <code style="color: #eb5657;">start()</code> 파라미터에 <code style="color: #eb5657;">CoroutineStart.Lazy</code> 를 할당하면 해당 코루틴을 호출하는 시점에 실행되도록 할 수 있다.
- <code style="color: #eb5657;">start()</code> 는 실행만 시키고 종료를 대기하지 않는다.
<br/>
<br/>

<code style="color: #eb5657;">start()</code> 는 `non-blocking` 함수, <code style="color: #eb5657;">join()</code> 은 `blocking` 함수이다.
```kotlin
import kotlinx.coroutines.*

// job.start()
fun main() = runBlocking {
    println("Start")
    job.start()
    println("End")
}

val job: Job = GlobalScope.launch(start = CoroutineStart.LAZY) {
    var i = 0
    while (i < 3) {
        delay(1000)
        println("Running $i")
        i++
    }
}


// Start
// End
// Running 0
// Running 1
// Running 2
```

```kotlin
import kotlinx.coroutines.*

// job.join()
fun main() = runBlocking {
    println("Start")
    job.join()
    println("End")
}

val job: Job = GlobalScope.launch(start = CoroutineStart.LAZY) {
    var i = 0
    while (i < 3) {
        delay(1000)
        println("Running $i")
        i++
    }
}


// Start
// Running 0
// Running 1
// Running 2
// End
```